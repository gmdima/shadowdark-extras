<div class="sdx-lt-container">
    <header class="sdx-lt-header">
        {{#if isRealtimeEnabled}}
        <div class="sdx-lt-status">
            <span class="sdx-lt-status-label">Status:</span>
            {{#if paused}}
            <span class="sdx-lt-status-value paused">
                <i class="fa-solid fa-circle-pause"></i> Paused
            </span>
            {{else}}
            <span class="sdx-lt-status-value active">
                <i class="fa-solid fa-circle-play"></i> Active
            </span>
            {{/if}}
        </div>
        {{/if}}

        <button type="button" data-action="toggleShowAll" class="sdx-lt-btn">
            {{#if showAllPlayerActors}}
            <i class="fas fa-eye-slash"></i> Hide Inactive
            {{else}}
            <i class="fas fa-eye"></i> Show All
            {{/if}}
        </button>
    </header>

    {{#if error}}
    <div class="sdx-lt-error">
        <i class="fas fa-exclamation-triangle"></i> {{error}}
    </div>
    {{else}}
    <section class="sdx-lt-grid">
        {{#each monitoredLightSources as |actor|}}
        {{#if actor.showOnTracker}}
        <div class="sdx-lt-character">
            <div class="sdx-lt-portrait" data-action="toggleActor" data-actor-id="{{actor._id}}">
                <img src="{{actor.img}}" alt="{{actor.name}}" data-tooltip="{{actor.name}}" />
            </div>
            <div class="sdx-lt-actor-header">
                <span class="sdx-lt-name">{{actor.name}}</span>
                {{#if actor.lightSources.length}}
                <a class="sdx-lt-actor-douse" data-action="disableActorLights" data-actor-id="{{actor._id}}"
                    data-tooltip="Turn off all {{actor.name}}'s lights">
                    <i class="fas fa-power-off"></i>
                </a>
                {{/if}}
            </div>
            <div class="sdx-lt-lights">
                {{#each actor.lightSources as |light|}}
                <div class="sdx-lt-light">
                    <a class="sdx-lt-light-toggle" data-action="disableLight" data-actor-id="{{actor._id}}"
                        data-item-id="{{light._id}}" data-tooltip="Douse Light">
                        {{#if light.isBasic}}
                        <i class="flame fa-solid fa-fire-flame-curved"></i>
                        {{else}}
                        <i class="fa-solid fa-hand-sparkles"></i>
                        {{/if}}
                    </a>
                    <span class="sdx-lt-light-name">{{light.name}}</span>
                    <span class="sdx-lt-light-time">
                        ({{light.remainingMins}} {{#if (eq light.remainingMins 1)}}min{{else}}mins{{/if}})
                    </span>
                </div>
                {{else}}
                <div class="sdx-lt-no-light">No active lights</div>
                {{/each}}
            </div>
        </div>
        {{/if}}
        {{else}}
        <div class="sdx-lt-empty">
            <i class="fas fa-moon"></i>
            <p>No characters with active lights</p>
        </div>
        {{/each}}
    </section>

    {{#if hasActiveLights}}
    <footer class="sdx-lt-footer">
        <button type="button" data-action="disableAllLights" class="sdx-lt-btn danger">
            <i class="fa-regular fa-face-fearful"></i> Turn Out All Lights
        </button>
    </footer>
    {{/if}}
    {{/if}}
</div>