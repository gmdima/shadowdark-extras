<div class="tom-smart-creator">

  <!-- ═══════════════════════════════════════════════════════════════
       HEADER
       ═══════════════════════════════════════════════════════════════ -->
  <header class="tom-creator-header">
    <i class="fas fa-user-circle"></i>
    <span class="tom-creator-title">New Character</span>
  </header>

  <!-- ═══════════════════════════════════════════════════════════════
       BODY
       ═══════════════════════════════════════════════════════════════ -->
  <div class="tom-creator-body">

    <!-- Name -->
    <div class="tom-creator-name-row">
      <input type="text" name="name" value="{{data.name}}" placeholder="Character name…" autofocus>
    </div>

    <!-- Assets: drop zone or review grid -->
    <div class="tom-creator-assets">
      {{#unless hasEmotions}}
      <p class="tom-creator-hint">
        <i class="fas fa-lightbulb"></i>
        Upload one image per emotion — file names become the labels (e.g. <code>Happy.png</code>).
      </p>
      <div class="tom-drop-zone" data-action="trigger-upload">
        <i class="fas fa-folder-open"></i>
        <span>Drop a folder here or click to browse</span>
        <input type="file" webkitdirectory directory multiple style="display:none" class="tom-file-input">
      </div>
      {{else}}
      <div class="tom-review-grid">
        {{#each data.emotions}}
        <div class="tom-review-card {{#if excluded}}excluded{{/if}}">
          <div class="tom-review-thumb">
            <img src="{{path}}">
            <div class="tom-review-actions">
              <button class="tom-icon-btn {{#if (eq ../data.defaultEmotion key)}}active{{/if}}" title="Set as Default"
                data-action="set-default" data-key="{{key}}">
                <i class="fas fa-star"></i>
              </button>
              <button class="tom-icon-btn delete" title="Exclude" data-action="toggle-exclude" data-key="{{key}}">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
          <input type="text" class="tom-emotion-name" value="{{key}}" data-action="rename-emotion"
            data-original-key="{{key}}">
        </div>
        {{/each}}
      </div>
      {{/unless}}

      {{#if uploadProgress}}
      {{#if (lt uploadProgress 100)}}
      <div class="tom-progress-bar">
        <div class="tom-progress-fill" style="width: {{uploadProgress}}%"></div>
        <span class="tom-progress-text">{{uploadProgress}}%</span>
      </div>
      {{/if}}
      {{/if}}
    </div>

  </div>

  <!-- ═══════════════════════════════════════════════════════════════
       FOOTER
       ═══════════════════════════════════════════════════════════════ -->
  <footer class="tom-creator-footer">
    <button class="tom-btn tom-btn-primary" data-action="finish" {{#unless hasEmotions}}disabled{{/unless}}>
      <i class="fas fa-plus"></i> Create Character
    </button>
  </footer>

</div>
